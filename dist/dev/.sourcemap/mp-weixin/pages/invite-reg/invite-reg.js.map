{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/invite-reg/invite-reg.vue?201b","webpack:///./src/pages/invite-reg/invite-reg.vue?3138","webpack:///./src/pages/invite-reg/invite-reg.vue?ac7d","webpack:///./src/pages/invite-reg/invite-reg.vue?9737","uni-app:///src/pages/invite-reg/invite-reg.vue","webpack:///./src/pages/invite-reg/invite-reg.vue?ab60"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","mobile","code","password","confirmPassword","codeDuration","inviteCode","onLoad","invite_code","methods","sendSmsCode","uni","showModal","content","showCancel","test","showLoading","title","mask","uniCloud","callFunction","name","action","params","type","success","e","result","clearInterval","msg","fail","complete","hideLoading","register","length","showToast","icon","res","confirm","JSON","stringify","download","location","href"],"mappings":";;;;wEAAA,qBACA,sBACA,mD,mDACAA,EAAWC,a;;;;2DCHX,+RACIC,EADJ,wHASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,kCACZ,aAAAF,E;;;;2GCvBf,g2B;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,whBAAud,eAAG,G;;;;kJCoE1d,CACEC,KADF,WAEI,MAAO,CACLC,OAAQ,GACRC,KAAM,GACNC,SAAU,GACVC,gBAAiB,GACjBC,aAAc,EACdC,WAAY,KAGhBC,OAXF,SAWA,GACIf,KAAKc,WAAanB,EAAQqB,aAE5BC,QAAS,CACPC,YADJ,WACA,WACUlB,KAAKa,cACPM,EAAIC,UAAU,CACZC,QAAS,KAAnB,iCACUC,YAAY,IAGX,YAAYC,KAAKvB,KAAKS,SAO3BU,EAAIK,YAAY,CACdC,MAAO,SACPC,MAAM,IAERC,EAASC,aAAa,CACpBC,KAAM,cACNrB,KAAM,CACJsB,OAAQ,cACRC,OAAQ,CACNtB,OAAQT,KAAKS,OACbuB,KAAM,aAGVC,QAAS,SAAjB,GAC+B,GAAjBC,EAAEC,OAAOzB,MACXS,EAAIC,UAAU,CACZC,QAAS,gBACTC,YAAY,IAEd,EAAZ,gBACY,EAAZ,qCACc,EAAd,eACA,IAAkB,EAAlB,cACoB,EAApB,eACkBc,cAAc,EAAhC,cACkB,EAAlB,qBAGA,MAEYjB,EAAIC,UAAU,CACZC,QAAS,WAAaa,EAAEC,OAAOE,IAC/Bf,YAAY,KAIlBgB,KAhCR,SAgCA,GACUnB,EAAIC,UAAU,CACZC,QAAS,UACTC,YAAY,KAGhBiB,SAtCR,WAuCUpB,EAAIqB,kBAjDNrB,EAAIC,UAAU,CACZC,QAAS,WACTC,YAAY,KAmDlBmB,SA9DJ,WA8DA,WAKW,YAAYlB,KAAKvB,KAAKS,QAOvBT,KAAKW,SAAS+B,OAAS,EACzBvB,EAAIwB,UAAU,CACZC,KAAM,OACNnB,MAAO,gBAIPzB,KAAKW,WAAaX,KAAKY,gBAOT,KAAdZ,KAAKU,MAOTS,EAAIK,YAAY,CACdC,MAAO,WAETE,EAASC,aAAa,CACpBC,KAAM,cACNrB,KAAM,CACJsB,OAAQ,cACRC,OAAQ,CACNtB,OAAQT,KAAKS,OACbC,KAAMV,KAAKU,KACXI,WAAYd,KAAKc,WACjBH,SAAUX,KAAKW,WAGnBsB,QAAS,SAAjB,GAGgC,IAAlBC,EAAEC,OAAOzB,KACXS,EAAIC,UAAU,CACZC,QAAS,mBACTY,QAAS,SAAvB,GACoBY,EAAIC,SACN,EAAlB,cAKY3B,EAAIC,UAAU,CACZC,QAAS,QAAUa,EAAEC,OAAOE,IAC5Bf,YAAY,KAIlBgB,KA9BR,SA8BA,GACUnB,EAAIC,UAAU,CACZC,QAAS0B,KAAKC,UAAUd,GACxBZ,YAAY,KAGhBiB,SApCR,WAqCUpB,EAAIqB,kBA9CNrB,EAAIwB,UAAU,CACZC,KAAM,OACNnB,MAAO,cATTN,EAAIwB,UAAU,CACZC,KAAM,OACNnB,MAAO,cAhBTN,EAAIC,UAAU,CACZC,QAAS,WACTC,YAAY,KAqElB2B,SA3IJ,WA4IMC,SAASC,KACf,gE;;;;2DC/NA,2uBAA0qB,eAAG,G","file":"pages/invite-reg/invite-reg.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/invite-reg/invite-reg.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./invite-reg.vue?vue&type=template&id=a4ea2574&\"\nvar renderjs\nimport script from \"./invite-reg.vue?vue&type=script&lang=js&\"\nexport * from \"./invite-reg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./invite-reg.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/invite-reg/invite-reg.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invite-reg.vue?vue&type=template&id=a4ea2574&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invite-reg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invite-reg.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"content\">\r\n    <view class=\"\"></view>\r\n    <view class=\"form-group\">\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">手机号：</text>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"text\"\r\n          auto-focus=\"true\"\r\n          v-model=\"mobile\"\r\n          placeholder=\"请输入手机号码\"\r\n        />\r\n      </view>\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">验证码：</text>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"form-input\"\r\n          v-model=\"code\"\r\n          placeholder=\"请输入验证码\"\r\n        />\r\n        <view class=\"send-code-btn\" @click=\"sendSmsCode\">{{\r\n          codeDuration ? codeDuration + \"s\" : \"发送验证码\"\r\n        }}</view>\r\n      </view>\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">邀请码：</text>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"text\"\r\n          v-model=\"inviteCode\"\r\n          placeholder=\"邀请码(选填)\"\r\n        />\r\n      </view>\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">密码：</text>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"password\"\r\n          displayable\r\n          v-model=\"password\"\r\n          placeholder=\"请输入密码\"\r\n        />\r\n      </view>\r\n      <view class=\"form-row\">\r\n        <text class=\"form-label\">确认密码：</text>\r\n        <input\r\n          class=\"form-input\"\r\n          type=\"password\"\r\n          displayable\r\n          v-model=\"confirmPassword\"\r\n          placeholder=\"请确认密码\"\r\n        />\r\n      </view>\r\n      <view class=\"form-submit\">\r\n        <button type=\"primary\" class=\"primary\" @tap=\"register\">注册</button>\r\n      </view>\r\n    </view>\r\n    <view class=\"download-app\">\r\n      <text @click=\"download\">已有账号下载APP登录</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n// 为方便演示，此邀请注册页面放在项目内，实际可以单独做一个项目放置邀请注册页面\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      mobile: \"\",\r\n      code: \"\",\r\n      password: \"\",\r\n      confirmPassword: \"\",\r\n      codeDuration: 0,\r\n      inviteCode: \"\"\r\n    };\r\n  },\r\n  onLoad(options) {\r\n    this.inviteCode = options.invite_code;\r\n  },\r\n  methods: {\r\n    sendSmsCode() {\r\n      if (this.codeDuration) {\r\n        uni.showModal({\r\n          content: `请在${this.codeDuration}秒后重试`,\r\n          showCancel: false\r\n        });\r\n      }\r\n      if (!/^1\\d{10}$/.test(this.mobile)) {\r\n        uni.showModal({\r\n          content: \"手机号码填写错误\",\r\n          showCancel: false\r\n        });\r\n        return;\r\n      }\r\n      uni.showLoading({\r\n        title: \"请稍等...\",\r\n        mask: true\r\n      });\r\n      uniCloud.callFunction({\r\n        name: \"user-center\",\r\n        data: {\r\n          action: \"sendSmsCode\",\r\n          params: {\r\n            mobile: this.mobile,\r\n            type: \"register\"\r\n          }\r\n        },\r\n        success: e => {\r\n          if (e.result.code == 0) {\r\n            uni.showModal({\r\n              content: \"验证码发送成功，请注意查收\",\r\n              showCancel: false\r\n            });\r\n            this.codeDuration = 60;\r\n            this.codeInterVal = setInterval(() => {\r\n              this.codeDuration--;\r\n              if (this.codeDuration === 0) {\r\n                if (this.codeInterVal) {\r\n                  clearInterval(this.codeInterVal);\r\n                  this.codeInterVal = null;\r\n                }\r\n              }\r\n            }, 1000);\r\n          } else {\r\n            uni.showModal({\r\n              content: \"验证码发送失败：\" + e.result.msg,\r\n              showCancel: false\r\n            });\r\n          }\r\n        },\r\n        fail(e) {\r\n          uni.showModal({\r\n            content: \"验证码发送失败\",\r\n            showCancel: false\r\n          });\r\n        },\r\n        complete() {\r\n          uni.hideLoading();\r\n        }\r\n      });\r\n    },\r\n    register() {\r\n      /**\r\n       * 客户端对账号信息进行一些必要的校验。\r\n       * 实际开发中，根据业务需要进行处理，这里仅做示例。\r\n       */\r\n      if (!/^1\\d{10}$/.test(this.mobile)) {\r\n        uni.showModal({\r\n          content: \"手机号码填写错误\",\r\n          showCancel: false\r\n        });\r\n        return;\r\n      }\r\n      if (this.password.length < 6) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          title: \"密码最短为 6 个字符\"\r\n        });\r\n        return;\r\n      }\r\n      if (this.password !== this.confirmPassword) {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          title: \"两次密码输入不一致\"\r\n        });\r\n        return;\r\n      }\r\n      if (this.code === \"\") {\r\n        uni.showToast({\r\n          icon: \"none\",\r\n          title: \"请输入正确的验证码\"\r\n        });\r\n        return;\r\n      }\r\n      uni.showLoading({\r\n        title: \"请稍后...\"\r\n      });\r\n      uniCloud.callFunction({\r\n        name: \"user-center\",\r\n        data: {\r\n          action: \"inviteLogin\",\r\n          params: {\r\n            mobile: this.mobile,\r\n            code: this.code,\r\n            inviteCode: this.inviteCode,\r\n            password: this.password\r\n          }\r\n        },\r\n        success: e => {\r\n          console.log(\"注册成功\", e);\r\n\r\n          if (e.result.code === 0) {\r\n            uni.showModal({\r\n              content: \"注册成功，是否立即下载APP登录\",\r\n              success: res => {\r\n                if (res.confirm) {\r\n                  this.download();\r\n                }\r\n              }\r\n            });\r\n          } else {\r\n            uni.showModal({\r\n              content: \"注册失败：\" + e.result.msg,\r\n              showCancel: false\r\n            });\r\n          }\r\n        },\r\n        fail(e) {\r\n          uni.showModal({\r\n            content: JSON.stringify(e),\r\n            showCancel: false\r\n          });\r\n        },\r\n        complete() {\r\n          uni.hideLoading();\r\n        }\r\n      });\r\n    },\r\n    download() {\r\n      location.href =\r\n        \"https://login.tpl.dcloud.net.cn/package/android-latest.apk\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.content {\r\n  padding: 20px;\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  justify-content: left;\r\n  height: 40px;\r\n  background-color: #ffffff;\r\n  border: solid 1px #dddddd;\r\n  border-radius: 20px;\r\n  overflow: hidden;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.form-row .form-label {\r\n  width: 80px;\r\n  padding-left: 15px;\r\n}\r\n\r\n.form-row .form-input {\r\n  flex: 1;\r\n  margin: 0px 10px;\r\n}\r\n\r\n.send-code-btn {\r\n  width: 120px;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  text-align: center;\r\n  background-color: #0faeff;\r\n  color: #ffffff;\r\n}\r\n\r\n.form-submit {\r\n  display: flex;\r\n  flex-direction: row;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.form-submit button {\r\n  flex: 1;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  border-radius: 40px;\r\n}\r\n\r\n.download-app {\r\n  text-align: center;\r\n  color: #007aff;\r\n  text-decoration: underline;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invite-reg.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./invite-reg.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}