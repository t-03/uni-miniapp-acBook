{"version":3,"sources":["webpack:///./src/components/roleselector/roleselector.vue?0040","webpack:///./src/components/roleselector/roleselector.vue?8a50","webpack:///./src/components/roleselector/roleselector.vue?2994","webpack:///./src/components/roleselector/roleselector.vue?6575","uni-app:///src/components/roleselector/roleselector.vue","webpack:///./src/components/roleselector/roleselector.vue?034f","webpack:///./src/components/roleselector/roleselector.vue?de30"],"names":[],"mappings":"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","file":"components/roleselector/roleselector.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./roleselector.vue?vue&type=template&id=519fefa4&\"\nvar renderjs\nimport script from \"./roleselector.vue?vue&type=script&lang=js&\"\nexport * from \"./roleselector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./roleselector.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/roleselector/roleselector.vue\"\nexport default component.exports","export * from \"-!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./roleselector.vue?vue&type=template&id=519fefa4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./roleselector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./roleselector.vue?vue&type=script&lang=js&\"","<template>\n  <Dialog\n    v-if=\"popStyle == 'inner' ? true : show\"\n    :pop=\"popStyle\"\n    title=\"绑定区服\"\n    @modalHide=\"_hideDialog()\"\n    @confirmModal=\"confirmed()\"\n    @cancelModal=\"canceled()\"\n    :showFooterButton=\"true\"\n    @tap.stop=\"hideSelectBox()\"\n  >\n    <view slot=\"body\" class=\"role-content\">\n      <view\n        class=\"select-item\"\n        v-for=\"(area, $index) in areaInfo\"\n        :key=\"$index\"\n      >\n        <view class=\"label\">{{ area.fieldName }}</view>\n        <view class=\"select-info\">\n          <view class=\"select-txt\" @tap.stop=\"selectFun(area.fieldKey)\">\n            {{ area.defaultItem.t }}\n          </view>\n          <view class=\"select-box\" v-show=\"selectType === area.fieldKey\">\n            <scroll-view\n              class=\"select-scroll\"\n              scroll-y=\"true\"\n              style=\"max-height: 225rpx;\"\n            >\n              <view\n                v-for=\"(data, num) in area['data']\"\n                :key=\"num\"\n                class=\"select-list\"\n                @tap.stop=\"handleAreaChange(data, area, $index, num)\"\n              >\n                {{ data.t }}\n              </view>\n            </scroll-view>\n          </view>\n        </view>\n      </view>\n      <view class=\"select-item select-role\">\n        <view class=\"label\">角色</view>\n        <view class=\"select-info\">\n          <view class=\"select-txt\" @tap.stop=\"selectFun('roles')\">\n            {{ roleName ? roleName : \"请选择角色\" }}\n          </view>\n          <view class=\"select-box\" v-show=\"selectType === 'roles'\">\n            <scroll-view\n              class=\"select-roll\"\n              scroll-y=\"true\"\n              style=\"max-height: 200rpx;\"\n            >\n              <view\n                class=\"select-list\"\n                v-for=\"(roleSelected, index) in roleInfo\"\n                :key=\"index\"\n                @tap.stop=\"handleRoleChange(roleSelected)\"\n              >\n                {{ roleSelected.roleName }}\n              </view>\n            </scroll-view>\n          </view>\n        </view>\n      </view>\n      <view class=\"select-item norole\">\n        <view class=\"label\"></view>\n        <view class=\"select-info select-norole\" v-if=\"noRole\">\n          <view class=\"select-txt select-txt-norole\">未查询到角色！</view>\n        </view>\n      </view>\n    </view>\n  </Dialog>\n</template>\n\n<script>\nimport Dialog from \"../dialog/dialog\";\nimport milo from \"../../utils/milo\";\nexport default {\n  name: \"role\",\n  comments: {\n    Dialog\n  },\n  props: {\n    popStyle: {\n      type: String,\n      default: \"dialog\"\n    },\n    show: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      selectType: \"\",\n      noRole: false, // 是否查询到角色\n      roleName: \"\", // 查询到的角色名字\n      areaName: null,\n      areaInfo: {}, // 大区控件信息\n      selectedAreaInfo: {}, // 已选择大区信息\n      roleInfo: [], // 角色信息\n      selectRoleInfo: {} //选中的角色信息\n    };\n  },\n  mounted() {\n    this.getAreaInfo();\n  },\n  methods: {\n    /**\n     * 展示与隐藏下拉菜单\n     */\n    selectFun(selectType) {\n      if (this.selectType !== \"\") {\n        this.selectType = \"\";\n        return;\n      }\n      this.selectType = selectType;\n    },\n    /**\n     * 获取大区控件默认信息\n     */\n    getAreaInfo() {\n      milo.getAreaInfo().then(res => {\n        let areaList = res;\n        this.areaInfo = [\n          {\n            fieldKey: areaList[\"fieldKey\"],\n            requestKey: areaList[\"requestKey\"],\n            fieldName: areaList[\"fieldName\"],\n            defaultItem: areaList[\"data\"][0],\n            data: areaList[\"data\"]\n          }\n        ];\n        // 检查当前业务有几层控件，并赋默认值\n        while (\n          areaList[\"data\"][1] &&\n          areaList[\"data\"][1].subData &&\n          Object.keys(areaList[\"data\"][1].subData).length > 0\n        ) {\n          const temp = areaList[\"data\"][1].subData;\n          this.areaInfo.push({\n            fieldKey: temp[\"fieldKey\"],\n            requestKey: temp[\"requestKey\"],\n            fieldName: temp[\"fieldName\"],\n            defaultItem: temp[\"data\"][0],\n            data: [temp[\"data\"][0]]\n          });\n          areaList = areaList[\"data\"][1].subData;\n        }\n      });\n    },\n    /**\n     * 数据变化\n     */\n    handleAreaChange(data, area, $index, num) {\n      area.defaultItem = data;\n\n      while (this.areaInfo[$index + 1]) {\n        this.areaInfo[$index + 1].defaultItem = this.areaInfo[\n          $index + 1\n        ].data[0];\n        if (this.areaInfo[$index][\"data\"][num].subData) {\n          this.areaInfo[$index + 1].data = this.areaInfo[$index][\"data\"][\n            num\n          ].subData.data;\n        } else {\n          this.areaInfo[$index + 1].data = [\n            this.areaInfo[$index + 1].defaultItem\n          ];\n        }\n        $index += 1;\n      }\n\n      // todo 切换大区 子项数据未变化\n      if (area[\"requestKey\"]) {\n        if (area[\"requestKey\"] == \"area\") {\n          this.areaName = data.t;\n        }\n        this.selectedAreaInfo[area[\"requestKey\"]] = data.v;\n      }\n\n      this.roleInfo = [];\n      this.roleName = \"\";\n      this.selectType = \"\";\n\n      if (\n        data.v !== \"empty\" &&\n        area[\"requestKey\"] ===\n          this.areaInfo[this.areaInfo.length - 1].requestKey\n      ) {\n        // 查询角色\n        this.queryRoleInfo();\n      }\n    },\n    /**\n     * 角色变化\n     */\n    handleRoleChange(roleSelected) {\n      this.roleName = roleSelected.roleName;\n      this.selectRoleInfo = roleSelected;\n      this.selectType = \"\";\n    },\n    /**\n     * 角色查询\n     */\n    queryRoleInfo() {\n      let self = this;\n\n      milo\n        .getRoleInfo(self.selectedAreaInfo)\n        .then(res => {\n          if (res.length > 0) {\n            let data = res;\n            data.forEach((item, index) => {\n              Object.assign(item, self.selectedAreaInfo);\n              console.log(1111, item);\n              item.areaname = self.areaName;\n            });\n            self.roleInfo = data;\n            console.log(44444444444, self.roleInfo);\n            self.noRole = false;\n          } else {\n            self.roleName = null;\n            self.noRole = true;\n          }\n        })\n        .catch(e => {\n          console.log(\"查询角色流程失败\", e);\n          uni.showModal({\n            title: \"温馨提示\",\n            content: e.flowRet.sMsg,\n            showCancel: false,\n            confirmText: \"知道了\"\n          });\n        });\n    },\n    /**\n     * 隐藏下拉框\n     */\n    hideSelectBox() {\n      if (this.selectType !== \"\") {\n        this.selectType = \"\";\n      }\n      return;\n    },\n    /**\n     * 隐藏弹窗\n     */\n    _hideDialog() {\n      this.$emit(\"bindClose\", null);\n    },\n    /**\n     * 确认\n     */\n    confirmed() {\n      if (this.roleName) {\n        this.$emit(\"Confirmed\", this.selectRoleInfo);\n      } else {\n        uni.showModal({\n          title: \"温馨提示\",\n          content: \"请选择角色\",\n          showCancel: false,\n          confirmText: \"知道了\"\n        });\n      }\n    },\n    /**\n     * 取消\n     */\n    canceled() {\n      this.$emit(\"Canceled\");\n    }\n  },\n  components: {\n    Dialog: Dialog\n  }\n};\n</script>\n\n<style>\n.role-content .select-item {\n  width: 480rpx;\n  height: 52rpx;\n  margin: 0 auto 30rpx;\n  position: relative;\n  display: flex;\n}\n.role-content .select-role {\n  margin-bottom: 0;\n}\n.role-content .select-item .label {\n  height: 100%;\n  flex-grow: 1;\n  text-align: right;\n  font-weight: bold;\n  font-size: 28rpx;\n  margin-right: 20rpx;\n}\n.role-content .select-item .select-info {\n  width: 360rpx;\n  height: 52rpx;\n  background: #fff;\n  border-radius: 8rpx;\n  padding: 0 0rpx;\n  display: block;\n  position: relative;\n  color: #000;\n  line-height: 52rpx;\n  box-sizing: border-box;\n}\n/* 右侧黄色 */\n.role-content .select-item .select-info:before {\n  content: \" \";\n  width: 42rpx;\n  height: 100%;\n  display: block;\n  position: absolute;\n  top: 0;\n  right: 0;\n  background: #d5bb85;\n  z-index: 0;\n  border-top-right-radius: 8rpx;\n  border-bottom-right-radius: 8rpx;\n}\n/* 箭头 */\n.role-content .select-item .select-info:after {\n  content: \" \";\n  position: absolute;\n  top: 22rpx;\n  right: 12rpx;\n  border: 10rpx solid transparent;\n  border-top-color: #fff;\n  pointer-events: none;\n  z-index: 0;\n}\n.role-content .select-item:first-child .select-info {\n  background: rgba(255, 255, 255, 0.5);\n}\n.role-content .norole {\n  margin-bottom: 0;\n}\n.role-content .norole .select-info {\n  background: none;\n  padding: 0;\n  color: #000000;\n}\n.role-content .norole .select-info:before {\n  display: none;\n}\n.role-content .norole .select-info:after {\n  display: none;\n}\n.role-content .select-item .select-info .select-txt {\n  font-size: 26rpx;\n  /* border: 1rpx solid #000000; */\n  border-radius: 8rpx;\n  width: 350rpx;\n  padding-left: 10rpx;\n  position: relative;\n  z-index: 10000;\n}\n.role-content .select-item .select-info .select-box {\n  width: 360rpx;\n  min-height: 120rpx;\n  position: absolute;\n  top: 55rpx;\n  left: 0rpx;\n  background: #fff;\n  border-bottom-left-radius: 8rpx;\n  border-bottom-right-radius: 8rpx;\n  z-index: 10001;\n  border: 1px solid #000000;\n  border-top: none;\n  box-sizing: border-box;\n  padding: 0rpx 10rpx 10rpx 10rpx;\n}\n.role-content .select-item .select-info .select-box .select-list:first-child {\n  border-top: none;\n}\n.role-content .select-item .select-info .select-box .select-list {\n  width: 100%;\n  height: 60rpx;\n  line-height: 60rpx;\n  border-top: 1rpx solid #e8e8e8;\n  font-size: 26rpx;\n  padding-left: 10rpx;\n}\n.role-content .select-item .select-info .select-box .select-list:last-child {\n  border-bottom: none;\n}\n.select-info.select-norole {\n  margin-top: 10rpx;\n}\n.role-content .select-item .select-info .select-txt-norole {\n  border: none;\n  color: #000000;\n}\n</style>\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./roleselector.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./roleselector.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1649904774659\n      var cssReload = require(\"E:/web/git/2022/04/uni-miniapp-acBook/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}